Some reference code I looked at during investigations
